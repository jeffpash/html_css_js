<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Exo 7 : Un formulaire</title>
        <style>
            body{
                font-size: 2rem;
            }
            
            header, main, footer{
                max-width: 60rem;
                margin: auto;
            }


            input, label, button{
                display: block;
                width: 100%;
                font-size: 2rem;
                transition: all .3s;
            }

            .error{
                border-color:  red;
            }
        </style>
    </head>
    <body>
        <header>
            <h1>Exo 7 : Un formulaire</h1>
        </header>

        <main>
            <form action="#" class="myForm">
                <label for="userChoiceId">Définir une couleur à traduire</label>
                <input type="text" name="userChoice" id="userChoiceId">
                <button type="submit">Traduire</button>
            </form>

            <p><i>En attente de traduction...</i></p>
        </main>

        <footer>
            <p>Under WTFPL Public Licence 2019</p>
        </footer>

        <!-- Le script s'ajoute juste avant la fin du body -->
        <script>
            
            /*
            Déclarations
            */
                let myForm = document.querySelector('.myForm');
                let userChoiceId = document.querySelector('#userChoiceId');
            //

            /*
            Supprimer la class .error de userChoiceId
            */
                userChoiceId.addEventListener('focus', () => {
                    userChoiceId.classList.remove('error');
                });
            //

            /*
            Fonction pour traduire les couleurs
            */
                const translateColor = color => {
                    console.log(color);
                };
            //

            /*
            Capter la soumission du formulaire
            */
                myForm.addEventListener('submit', (event) => {
                    // Bloquer l'événement
                    event.preventDefault();

                    // Vérifier qu'il y à bien une valeur dans l'input 
                    if( userChoiceId.value.length > 0 ){
                        // Appeler la fonction pour traduire la couleur
                        translateColor(userChoiceId.value);
                    }
                    else{
                        // Ajouter la class .error sur userChoiceId
                        // https://developer.mozilla.org/fr/docs/Web/API/Element/classList
                        userChoiceId.classList.add('error');
                    };
                });
            //
            
        </script>
    </body>
</html>